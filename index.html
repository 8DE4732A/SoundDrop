<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoundDrop - 声音传输文件</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>SoundDrop</h1>
        <p class="subtitle">通过声音传输文件 (最大 100KB)</p>

        <div class="tabs">
            <button class="tab active" data-tab="send">发送文件</button>
            <button class="tab" data-tab="receive">接收文件</button>
        </div>

        <!-- 发送面板 -->
        <div id="send-panel" class="panel active">
            <div class="file-input-area">
                <input type="file" id="file-input" accept="*/*">
                <label for="file-input" class="file-label">
                    <span class="icon">📁</span>
                    <span>选择文件</span>
                </label>
            </div>

            <div id="file-info" class="file-info hidden">
                <div class="info-item">
                    <strong>文件名:</strong> <span id="file-name"></span>
                </div>
                <div class="info-item">
                    <strong>大小:</strong> <span id="file-size"></span>
                </div>
                <div class="info-item">
                    <strong>类型:</strong> <span id="file-type"></span>
                </div>
            </div>

            <button id="send-btn" class="btn btn-primary hidden">开始发送</button>

            <div id="send-progress" class="progress-area hidden">
                <div class="progress-bar">
                    <div id="send-progress-fill" class="progress-fill"></div>
                </div>
                <div class="progress-text">
                    <span id="send-status">准备中...</span>
                    <span id="send-percent">0%</span>
                </div>
            </div>
        </div>

        <!-- 接收面板 -->
        <div id="receive-panel" class="panel">
            <button id="receive-btn" class="btn btn-primary">开始监听</button>
            <button id="stop-receive-btn" class="btn btn-secondary hidden">停止监听</button>

            <div id="receive-status" class="status-area">
                <div class="status-text">等待开始...</div>
            </div>

            <!-- 波形图显示 -->
            <div id="waveform-container" class="waveform-container hidden">
                <canvas id="waveform-canvas"></canvas>
            </div>

            <div id="receive-progress" class="progress-area hidden">
                <div class="progress-bar">
                    <div id="receive-progress-fill" class="progress-fill"></div>
                </div>
                <div class="progress-text">
                    <span id="receive-status-text">接收中...</span>
                    <span id="receive-percent">0%</span>
                </div>
            </div>

            <div id="received-file" class="received-file hidden">
                <div class="success-icon">✓</div>
                <div class="received-info">
                    <div><strong>文件名:</strong> <span id="received-name"></span></div>
                    <div><strong>大小:</strong> <span id="received-size"></span></div>
                </div>
                <button id="download-btn" class="btn btn-success">下载文件</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/ggwave@0.4.0/ggwave.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
